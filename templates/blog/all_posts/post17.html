{% extends 'blog/all_posts/base_post.html' %}

{% load static %}

{% block post_title %}
    <a href="{% url 'blog:all-posts' %}" class="font_kor">(13) 나만의 라이브러리 만들기</a>
{% endblock post_title %}

{% block post_content %}

{% block post_date %}
    <div class="container w-1/2 mx-auto mb-10 post_date">[ Oct 03, 2021 ]</div>    
{% endblock post_date %}

<main class="container w-1/2 mx-auto font_kor">

{% include "blog/all_posts/css_post.html" %}
  
<!-- notion html -->
<body><article id="b7786ed5-9879-41f4-aadf-e744e233e378" class="page sans"><div class="page-body"><ul id="7024d340-3c0b-4e6a-8e8f-0628d09e6ae4" class="bulleted-list"><li style="list-style-type:disc">라이브러리 : 여러 프로그램에서 공유가능한 코드</li></ul><h3 id="1c494e28-66ae-4692-bc0d-69631393b8d3" class="">C에서도 라이브러리를 만들수 있다</h3><ul id="ea2741fa-ec75-4ec2-90b9-7ad943ec8515" class="bulleted-list"><li style="list-style-type:disc">오브젝트 파일을 모아 라이브러리로 만듦</li></ul><ul id="755b78ee-f775-4d41-b07a-78d5a2666658" class="bulleted-list"><li style="list-style-type:disc">다시 컴파일 할 필요 없이 코드 재활용이 가능</li></ul><ul id="d5404381-b416-44f5-8bde-6e261f0f6f22" class="bulleted-list"><li style="list-style-type:disc">소스 코드 공개 없이(단, 헤더파일은 예외) 라이브러리 배포 가능</li></ul><ul id="16b83380-9f37-493a-bfcd-a741422f4aae" class="bulleted-list"><li style="list-style-type:disc">C에서 두 종류의 라이브러리를 만들 수 있음<p id="2dba54d8-3d80-4c79-a6ce-8ccdcdc7ef15" class="">1) 정적 라이브러리</p><p id="80e4e693-f8fe-453e-af9e-185e4b5b2af2" class="">2) 동적 라이브러리</p></li></ul><h2 id="d30352e5-3f91-4506-8580-6caffe527f71" class="">정적 라이브러리</h2><h3 id="4556a629-7837-4366-82a3-1a65dc36249d" class="">(복습) 정적 라이브러리와 링크</h3><ul id="4fac8b17-730c-4725-8dbb-47fdfae7cf9b" class="bulleted-list"><li style="list-style-type:disc">정적 라이브러리와 링크하는 것을 정적 링킹이라고 함</li></ul><ul id="b4878888-190f-4b9c-940a-35731d336457" class="bulleted-list"><li style="list-style-type:disc">라이브러리 안에 있는 최종 실행파일에 가져다 복사함</li></ul><ul id="645aa91f-4cc6-4674-b96a-f5ac9cebfb0f" class="bulleted-list"><li style="list-style-type:disc">동적 링킹에 비해<ul id="a6b439b9-5f01-46f0-bc97-eee1989606e8" class="bulleted-list"><li style="list-style-type:circle">실행파일의 크기가 커짐</li></ul><ul id="bcadd211-fdd8-4285-8fa8-dee149f2d111" class="bulleted-list"><li style="list-style-type:circle">메모리를 더 잡아먹을 수 있음</li></ul><ul id="7a80fb33-db7c-4e52-b83e-1c839c0ecf89" class="bulleted-list"><li style="list-style-type:circle">실행 속도가 빠름</li></ul></li></ul><ul id="3df13bc8-9895-4d3b-83f1-e7d4acdb5d05" class="bulleted-list"><li style="list-style-type:disc">정적 라이브러리 + 오브젝트 파일 → 링크(링킹) → 실행파일</li></ul><h3 id="e8b1be5d-6912-41b9-9106-6179b1fbf6f4" class="">보통 정적 라이브러리를 사용하는 절차</h3><p id="fdc90ff8-9da0-4e14-af47-35a3e14a44ba" class="">1) 소스코드들을 컴파일하여 정적 라이브러리르 만듦</p><ul id="1686c6e4-ea53-4d5e-8b52-db265cc23806" class="bulleted-list"><li style="list-style-type:disc">보통 파일 하나</li></ul><ul id="6a53d60e-954c-4c00-9d17-48f5b4f9dd70" class="bulleted-list"><li style="list-style-type:disc">물론 여러 개의 라이브러리를 만들면 파일도 여럿</li></ul><ul id="18e2b07c-ab2c-4b6a-a6bf-e9476d91cad2" class="bulleted-list"><li style="list-style-type:disc">확장자는<code> *.lib</code>(윈도우 비주얼 스튜디오) 또는 <code>*.a</code>(리눅스 계열)</li></ul><ul id="d47d2dd3-3792-4c86-8758-51b8b990e3bc" class="bulleted-list"><li style="list-style-type:disc">참고로 리눅스 계열에서는 아카이브(archieve)라고도 함</li></ul><p id="c8fc9d27-409e-40c9-bbf2-691c094af78f" class="">2) 다른 소스 코드들을 작성할 때 위 라이브러리의 헤더 파일들을 사용</p><ul id="e1c86d7a-dfb9-464b-a576-f2447a81bc1a" class="bulleted-list"><li style="list-style-type:disc">실행 파일을 만들기 위해 <code>main()</code> 함수를 가지고 있는게 보통</li></ul><ul id="fa7a9f8a-b9c2-4925-96be-6238ddf79a1e" class="bulleted-list"><li style="list-style-type:disc">여기의 소스 코드들이 바뀌어도 정적 라이브러리를 다시 만들 필요 없음</li></ul><p id="c2312415-40a5-41ee-bb33-f0dc701bffc4" class="">3) 컴파일 할 때 정적 라이브러리와 함께 링킹</p><h3 id="8e17497c-9b6d-4429-9237-9a410fc94c2f" class="">(1) simple_math.c 컴파일 하기</h3><ul id="4e57ec98-4bd8-436a-b7da-be8d4bf5bed3" class="bulleted-list"><li style="list-style-type:disc"><code>.c</code> 파일을 컴파일해서 <code>.o</code> 파일을 얻음</li></ul><pre id="b7660f2d-86ff-4746-a366-c866578857f6" class="code"><code>week12/simple_math&gt; clang -std=c89 -W -Wall -pedantic -errors -c simple_math.c -o simple_math.o</code></pre><h3 id="02937afb-1f27-47e1-9343-81743fc539a8" class="">(2) 정적 라이브러리 만들기</h3><ul id="45886fce-89f5-4d00-8507-89752b8402f6" class="bulleted-list"><li style="list-style-type:disc">플랫폼마다 이용하는 실행파일이 다름<ul id="e07ad536-f07c-4cc4-99cd-20942646ea75" class="bulleted-list"><li style="list-style-type:circle">윈도우: <code>lllvm-ar</code></li></ul><ul id="80f2942b-daab-4cdf-814b-e21147044005" class="bulleted-list"><li style="list-style-type:circle">리눅스 계열 : <code>ar</code></li></ul></li></ul><p id="d18e9163-efd5-4390-82df-b34a75d6150a" class=""><strong>&lt;llvm-ar&gt;</strong></p><pre id="8f354dbe-7725-4d9a-ad53-ce3981e71dea" class="code"><code>llvm-ar -명렁어&lt;modifier&gt; 정적_라이브러리_파일 &lt;o파일들&gt;</code></pre><ul id="f2be7e4d-692b-4ebb-9ebb-ae495d26f408" class="bulleted-list"><li style="list-style-type:disc">명령어<ul id="2cf04802-66b1-4dca-ad5f-a665d46167cd" class="bulleted-list"><li style="list-style-type:circle"><code>r</code> : 정적_라이브러리_파일에 <code>o</code>파일들을 추가</li></ul><ul id="f0cffe00-cd18-4c3d-b822-5f347c2f417e" class="bulleted-list"><li style="list-style-type:circle"><code>d</code> : 정적_라이브러리_파일에서 <code>o</code>파일들을 삭제</li></ul></li></ul><ul id="c1ebe2e2-2bd7-4087-9f11-761211445330" class="bulleted-list"><li style="list-style-type:disc">modifier (선택)<ul id="bdfb5c56-0fd9-4035-95c7-b66d2554b6b7" class="bulleted-list"><li style="list-style-type:circle">각 명령어마다 사용할 수 있는 <code>modifier</code>가 다름</li></ul><ul id="50b9e0ec-61e3-418c-825c-f0c0d228d35f" class="bulleted-list"><li style="list-style-type:circle"><code>c</code> : 정적 라이브러리 파일이 처음 만들어질 때 경고 메세지를 출력 안 함</li></ul></li></ul><ul id="26f043c8-0e93-40dd-940d-ea553207ffa1" class="bulleted-list"><li style="list-style-type:disc">아래 예 둘 다 <code>simple_math.lib</code> 파일이 없는 경우<ul id="444d183f-74b4-4d91-b848-98dfbcaf2174" class="bulleted-list"><li style="list-style-type:circle">&#x27;<code>c</code>&#x27;를 사용하지 않을 때<pre id="4148c27a-1790-4c74-84b3-ee6b2c68720c" class="code"><code>&gt; llvm-ar -r simple_math.lib simple_math.pp
llvm-ar.exe: warning: creaint simple_math.lib</code></pre></li></ul><ul id="fddb164c-cac5-4fa9-b125-ee6bff2beb33" class="bulleted-list"><li style="list-style-type:circle">&#x27;<code>c</code>&#x27;를 사용할 때<pre id="13fe8bab-1cf5-4cdb-b99b-cb91dfb45a65" class="code"><code>&gt; llvm-ar -rc simple_math.lib *.o</code></pre></li></ul></li></ul><p id="cb840dde-e2b5-47be-b59f-d28c123f8aea" class=""><strong>&lt;llvm-ar으로 정적 라이브러리 만들기?</strong></p><pre id="fbec5fbf-146e-49fb-a3b0-6e174181a66c" class="code"><code>week12/simple_math&gt; llvm-ar -rc ../lib/simple_math.lib simple_math.o</code></pre><ul id="2f01f1df-1480-40a6-a54b-597a911c56e4" class="bulleted-list"><li style="list-style-type:disc"><code>../lib/simple_math.lib</code> : 정적 라이브러리 파일을 저장할 경로까지 지정 가능</li></ul><h3 id="befdbd01-93e7-489a-af99-1c62cb9da1a8" class="">(3) 정적 라이브러리의 헤더 인클루드하기</h3><pre id="0ac6e869-da34-4567-a121-f8a3ba957e47" class="code"><code>/* main.c */

#include &lt;stdio.h&gt;
#include &quot;simple_math.h&quot; /* 정적 라이브러리 헤더 인클루드 */

int main()
{
	printf(&quot;Text: %d\n&quot;, add(10, 20));
	return 0;
}</code></pre><ul id="7f61ac24-b08e-47c5-af9a-8e583bb1de69" class="bulleted-list"><li style="list-style-type:disc">정적 라이브러리에 있는 함수를 사용하려면 해당 헤더를 인클루드</li></ul><ul id="dfc6511e-37d7-4558-9017-f6c4a1cfc500" class="bulleted-list"><li style="list-style-type:disc">이 때 헤더 파일의 경로는 생략하는게 일반적</li></ul><ul id="bcd2dd49-2d49-4b56-ac5b-760c0e509c34" class="bulleted-list"><li style="list-style-type:disc">아직 함수의 실제 구현을 모름</li></ul><h3 id="a931c754-d428-4b61-9deb-9eab26f7ff9f" class="">(4) 정적 라이브러리와 함께 빌드하기</h3><pre id="ade45bf5-90df-456c-808e-a22dd15c329a" class="code"><code>clang -std=c89 -W -Wall -pedantic-errors -I &lt;dir&gt; -L &lt;dir&gt; -l&lt;lib_name&gt; *.c</code></pre><ul id="cdb9f158-dd95-4545-9380-263d04a1db2f" class="bulleted-list"><li style="list-style-type:disc"><code>-I &lt;dir&gt;</code><ul id="88314f17-e897-4e72-b728-d7e04c6366e3" class="bulleted-list"><li style="list-style-type:circle">대문자 i임</li></ul><ul id="bbdf50e9-3849-45b9-a080-2604af17607d" class="bulleted-list"><li style="list-style-type:circle">인클루드 할 때 헤더 파일을 검색할 경로를 추가</li></ul></li></ul><ul id="e6f0a63f-e4e5-4840-9737-216349a356ba" class="bulleted-list"><li style="list-style-type:disc"><code>-L &lt;dir&gt;</code><ul id="7f9bbc29-8368-4355-aab9-64e5f9aa0683" class="bulleted-list"><li style="list-style-type:circle">빌드 시 사용할 라이브러리 파일이 있는 폴더</li></ul></li></ul><ul id="55db7dba-3ebf-4784-adf9-c1ee2f7f3f69" class="bulleted-list"><li style="list-style-type:disc"><code>-l&lt;lib_name&gt;</code><ul id="5cafcea4-b559-4fc3-88c8-f944658d8611" class="bulleted-list"><li style="list-style-type:circle">소문자 L임</li></ul><ul id="71a3a4e3-9756-455f-a324-09eb5b2e5cb9" class="bulleted-list"><li style="list-style-type:circle"><code>lib_name</code> : 빌드 시 사용할 라이브러리</li></ul><ul id="c55befaf-25e4-4356-b51a-2680ed3f57cb" class="bulleted-list"><li style="list-style-type:circle"><code>파일명.lib</code>에서 파일명을 <code>-l</code> 다음에 띄어쓰기 없이 붙임</li></ul></li></ul><h3 id="4e5530cc-a16e-4fd6-82b3-3c02d0ac0b75" class="">simple_math.lib과 함께 빌드해보자</h3><pre id="07889f25-d5ef-4049-a782-31e0638b2da3" class="code"><code>week12/program&gt; clang -std=c89 -W -Wall -pedantic-erros -I &quot;../simple_math&quot; -: &quot;../lib&quot; -Isimple_math *.c</code></pre><ul id="d3fe09a9-eb38-4174-b772-9c7006f1b7bb" class="bulleted-list"><li style="list-style-type:disc"><code>simple_math.h</code>는 <code>week12/simple_math</code>에 있음<ul id="da8a8b11-2bc0-427f-938e-e6358a8ec12b" class="bulleted-list"><li style="list-style-type:circle">따라서 <code>-I</code>를 이용해 해당 경로를 알려줌<ul id="a2192b4f-9047-442f-8fbb-d19a28518ebd" class="bulleted-list"><li style="list-style-type:square">안 그러면 헤더 파일을 찾지 못 함</li></ul><ul id="404bd4e9-021b-4b4b-b933-9df350ccfef4" class="bulleted-list"><li style="list-style-type:square">이게 소스코드에서 경로를 넣어줄 필요가 없던 이유</li></ul></li></ul></li></ul><ul id="54e4042f-f871-4a7e-a9b5-152baa98e7f0" class="bulleted-list"><li style="list-style-type:disc"> 정적 라이브러리 파일은 <code>week12/lib</code>에 있음<ul id="ecdbf3f3-1b48-4345-aaf9-2dcd6e42d43a" class="bulleted-list"><li style="list-style-type:circle">따라서 <code>-L</code>을 이용해 해당 경로를 알려줌</li></ul></li></ul><ul id="7d4b2f4d-3973-41f9-8e5f-2c1ce4b4a208" class="bulleted-list"><li style="list-style-type:disc">정적 라이블러ㅣ 파일명은 <code>&#x27;simple_math.lib&#x27;</code><ul id="bbd50294-2cb8-45b2-b430-cb39ad4b6eea" class="bulleted-list"><li style="list-style-type:circle">따라서 <code>-l</code> 바로 뒤에 <code>&#x27;simple_math&#x27;</code>를 붙여줌</li></ul></li></ul><ul id="8adda112-2674-42d7-8434-3529e6ec1614" class="bulleted-list"><li style="list-style-type:disc">실행파일이 제대로 빌드 됨</li></ul><ul id="c0e51cfb-550f-4af9-a194-59a6c1474d06" class="bulleted-list"><li style="list-style-type:disc">이제 평상시와 같이 실행하면 끝</li></ul><p id="78178c97-1606-435f-a8c0-2e57d428979b" class=""><strong>&lt;파일이 많아지면 일일이 다 타이핑?&gt;</strong></p><ul id="417b7538-fdcf-412c-bce5-0bad38820c6e" class="bulleted-list"><li style="list-style-type:disc">원칙상은 그렇게 해야함</li></ul><ul id="5c6ad5d3-8588-470f-91fe-fdca161d0b3c" class="bulleted-list"><li style="list-style-type:disc">하지만 쉽게 해주기 위해 프로젝트를 만들어서 사용함</li></ul><ul id="9c91e666-9353-4a9f-a78e-4d175fe487f8" class="bulleted-list"><li style="list-style-type:disc">비주얼 스튜디오를 사용하면 C를 프로젝트로 사용 가능</li></ul><ul id="86bcbad2-80b7-4812-b4e6-79bc2a6eaa22" class="bulleted-list"><li style="list-style-type:disc">GCC나 Clang의 경우 자체적으로 프로젝트 같은 것을 지원하지 않음</li></ul><ul id="6e4e4c7c-e385-4648-9de5-549421b07418" class="bulleted-list"><li style="list-style-type:disc">CMake를 이용하면 가능</li></ul><p id="d3d7c5a5-46a0-486f-b9ad-b9c2a52864c8" class=""><strong>&lt;프로젝트&gt;</strong></p><ul id="2bef4c9d-4080-43a5-9e27-feadfcd34440" class="bulleted-list"><li style="list-style-type:disc">라이브러리를 만들 때, 어떤 파일들을 컴파일해야 하는지</li></ul><ul id="881be86e-c9e4-48f8-a898-067fef377b43" class="bulleted-list"><li style="list-style-type:disc">실행파일을 만들 때,  어떤 소스코드와 어떤 라이브러리를 합쳐야 하는지</li></ul><ul id="a4c0264f-e57a-4ced-ac0e-0efea22a47ab" class="bulleted-list"><li style="list-style-type:disc">위와 같은 내용들을 적어두는 파일</li></ul><ul id="05aca516-900d-41ba-b87d-ca9571f9d13e" class="bulleted-list"><li style="list-style-type:disc">그 외 다른 정보도 들어 있음 → 가령 컴파일 옵션과 같은 내용들</li></ul><h2 id="1f09a049-98d0-4b01-9d7c-ffbfb345f658" class="">동적 라이브러리</h2><h3 id="90ee5b69-31e4-48a1-b0a0-9695a53f8ddc" class="">(복습) 동적 라이브러리와 링크</h3><ul id="0f014db5-1a55-4d16-9c64-9870e7b58c9d" class="bulleted-list"><li style="list-style-type:disc">동적 라이브러리와 링크하는 것을 동적 링킹이라고 함</li></ul><ul id="1892a0a2-73d6-4fb4-a1d6-3a4cf1cc0d35" class="bulleted-list"><li style="list-style-type:disc">실행파일 안에 여전히 구멍을 남겨두는 방법</li></ul><ul id="b91460f5-72ce-49c6-bf5d-0de02f54de3e" class="bulleted-list"><li style="list-style-type:disc">실행파일을 실행할 때 실제로 링킹이 일어남<ul id="f4efcf86-f713-4c42-a02f-da12f405312d" class="bulleted-list"><li style="list-style-type:circle">이 링킹은 실행 중에 운영체제가 해줌</li></ul></li></ul><ul id="7e48a041-93a4-47f5-b086-d4f113ab8a3c" class="bulleted-list"><li style="list-style-type:disc">실행 중인 실행파일 + 동적 라이브러리 → 링크(링킹)</li></ul><ul id="94ed8bfc-5e35-4137-8058-7b38cb911362" class="bulleted-list"><li style="list-style-type:disc">정적 링킹에 비해<ul id="69c827ce-b787-41da-b613-bcda2810c147" class="bulleted-list"><li style="list-style-type:circle">실행파일 크기가 작다</li></ul><ul id="b8f402a7-2932-4669-a50b-f668203124fd" class="bulleted-list"><li style="list-style-type:circle">여러 실행파일이 동일한 라이브러리를 공유할 수 있음 → 메모리 절약</li></ul><ul id="c78274dd-fd18-4563-835a-96335f198eb3" class="bulleted-list"><li style="list-style-type:circle">여러 실행파일이 이름은 같지만 버전이 다른 동적 라이브러리를 사용한다면 DLL지옥(DLL Hell)을 맞볼 수 있음<ul id="fe0042a8-c398-4c37-8587-71c3a0ee5145" class="bulleted-list"><li style="list-style-type:square">보안 프로그램 A 은행에서 깔면 B 은행이 크래시가 나고 B 은행에서 깔면 A 은행이 크래시가 나는 경우</li></ul></li></ul></li></ul><h3 id="68aa9dd8-e68a-454a-bd40-4e0b35f3742b" class="">보통 동적 라이브러리를 사용하는 절차</h3><p id="66a81b6a-8728-4ae7-950a-a8990895cc70" class="">1) 소스코드들을 컴파일 하여 동적 라이브러리르 만듦</p><ul id="5e753ff5-c207-4055-90d3-8cc02439beb3" class="bulleted-list"><li style="list-style-type:disc">역시 파일 하나</li></ul><ul id="b03a979a-749f-4d34-84f9-135a3d6bd323" class="bulleted-list"><li style="list-style-type:disc">확장자는 <code>*dll</code>(윈도우) 또는 <code>*.so</code>(리눅스 계열)</li></ul><p id="2f4b71e0-3cd9-4a29-a138-3365ab85c31d" class="">2) 다른 소스코드들을 작성할 때 위 라이브러리의 헤더 파일들을 사용</p><p id="6e45ef9c-be9d-40e6-8adc-5ca601016eb7" class="">3) 컴파일 할 떄 동적 라이브러리와 함께 링킹</p><ul id="0fc21360-1216-40a5-94ef-0d381eab4868" class="bulleted-list"><li style="list-style-type:disc">단, 동적 라이브러리에 있는 기계어가 실행파일에 포함되지 않음</li></ul><ul id="65c1523d-6756-4355-b40c-9a1e0bcbd59b" class="bulleted-list"><li style="list-style-type:disc">실행 중에 동적 링킹할 수 있는 정보만 포함</li></ul><ul id="0f13bfa4-db7a-48a6-b80e-c629768fb6c2" class="bulleted-list"><li style="list-style-type:disc">따라서 동적 라이브러리 파일도 같이 배포해야 함</li></ul><h3 id="3a61f15e-ab93-4653-9b48-4a8d4ed6d468" class="">동적 라이브러리와 운영체제</h3><ul id="7b3bf6dc-e99b-43e1-ad27-73967b51577b" class="bulleted-list"><li style="list-style-type:disc">운영체제마다 실행파일 및 동적 라이브러리 내부 포맷이 다름<ul id="f4694b33-740d-4208-accb-6d84a04b7690" class="bulleted-list"><li style="list-style-type:circle">리눅스 계열 : ELF(excutable and linkable format) 포맷</li></ul><ul id="1b272f08-78ac-4a16-839f-0f66b32abbf6" class="bulleted-list"><li style="list-style-type:circle">윈도우 : PE(portable excutable) 포맷</li></ul></li></ul><ul id="8063dc32-40db-4dc5-b5ca-0ce3663ad027" class="bulleted-list"><li style="list-style-type:disc">운영체제의 동적 링커(dynamic linker)<ul id="1e092048-9fce-4222-a722-59d26e5aa91e" class="bulleted-list"><li style="list-style-type:circle">프로그램이 실행될 때 필요한 동적 라이브러리를 로딩 후 링킹해줌</li></ul><ul id="0d8e91e0-7b16-4975-94f2-919c421bf6df" class="bulleted-list"><li style="list-style-type:circle">이러려면 동적 라이브러리 안에 있는 함수들을 메모리에 매핑해줘야함</li></ul><ul id="c220a291-8ccb-4a60-88fd-df9d855d055a" class="bulleted-list"><li style="list-style-type:circle">메모리 맵핑할 때 필요한 정보가 위 포맷에 저장되어 있음</li></ul><ul id="d37a83db-27e9-4741-8441-6bb1ddb376c4" class="bulleted-list"><li style="list-style-type:circle">따라서 운영체제가 지원하지 않는 포맷이면 정보를 읽어오지 못함</li></ul></li></ul><ul id="13819309-7e6c-4051-a090-13092da397a8" class="bulleted-list"><li style="list-style-type:disc">즉, 동적 라이브러리는 운영체제에 종속적</li></ul><ul id="64b9d9df-f68e-4244-b50a-19c488ed9749" class="bulleted-list"><li style="list-style-type:disc">운영체제와 컴파일러마다 동적 라이브러리를 만드는 방법이 다름</li></ul><ul id="73d4a1c1-2322-4bc3-b715-b1ed74a0daf2" class="bulleted-list"><li style="list-style-type:disc">보통 사용하는 컴파일러<ul id="ca19c1dd-5b37-4518-acb8-119fb89dedcd" class="bulleted-list"><li style="list-style-type:circle">윈도우는 주로 비주얼 스튜디오를 이용</li></ul><ul id="91bba1a2-c1ba-400a-ac6a-ec8baca3d80b" class="bulleted-list"><li style="list-style-type:circle">리눅스 계열은 주로 clang이나 GCC를 이용</li></ul></li></ul><ul id="92ac77d2-07dc-4df9-adea-2d843139e967" class="bulleted-list"><li style="list-style-type:disc">Clang이나 GCC를 쓸 경우 윈도우나 리눅스에서 만드는 법이 다름</li></ul><ul id="070285c1-367c-461f-bd24-275731e0eb80" class="bulleted-list"><li style="list-style-type:disc">윈도우의 Clang을 사용할 때도 컴파일러 백엔드에 따라 또 달라짐<ul id="493aa732-a56c-4535-865d-82bf10b3f03f" class="bulleted-list"><li style="list-style-type:circle">MinGW</li></ul><ul id="db8bdbbb-6c9b-45b6-a1f7-48f2d40ea437" class="bulleted-list"><li style="list-style-type:circle">비주얼 스튜디오</li></ul></li></ul><ul id="64ee23de-cf8d-4357-a5f5-137ef2e51e5f" class="bulleted-list"><li style="list-style-type:disc">따라서 여기서는 동적 라이브러리를 만드는 자세한 설명은 생략</li></ul><ul id="1db5f99f-11a7-4dff-84e5-87e29ae1c558" class="bulleted-list"><li style="list-style-type:disc">궁금하면 각 운영체제와 컴파일러에 맞는 방법을 직접 찾아볼것<ul id="f415e5f1-1894-4998-b1e2-2d0e1081f7f5" class="bulleted-list"><li style="list-style-type:circle">예 : 리눅스 계열에서 gcc를 사용할 경우<p id="a9fb12d8-9de5-4d4e-ad9e-9b34290adafd" class=""><strong>&lt;동적 라이브러리 만들기&gt;</strong></p><pre id="7027ea4b-e590-4108-8124-61f0e6119e69" class="code"><code>gcc-shared &lt;o 파일 + 경로&gt;-o &lt;동적 라이브러리 파일명 + 경로&gt;</code></pre><p id="dfdef040-d49b-4406-8f3c-20f544e7182c" class=""><strong>&lt;동적 라이브러리 링크하기&gt;</strong></p><pre id="5ca3c8c7-92f3-47f5-8746-63670850e7d7" class="code"><code>gcc &lt;o파일 + 경로&gt;-L&lt;동적 라이브러리 경로&gt;-l&lt;동적 라이브러리 이름&gt;-o&lt;실행파일 이름&gt;</code></pre></li></ul></li></ul><h2 id="68ea50c5-642d-4624-9b51-f84465d8dd58" class="">정적 라이브러리와 동적 라이브러리</h2><h3 id="4064dc51-7c26-405a-8e83-d5735aafb811" class="">동적 라이브러리의 장단점</h3><ul id="96af2e1b-deb6-4b72-8c5b-8330807b047c" class="bulleted-list"><li style="list-style-type:disc">장점<ul id="f7b154b1-3ffc-48c7-a475-c3fd6447e698" class="bulleted-list"><li style="list-style-type:circle">실행파일을 바꾸지 않고 동적 라이브러리 파일만 업데이트 가능</li></ul><ul id="165961da-89a8-4efd-99f2-49d022bb66ac" class="bulleted-list"><li style="list-style-type:circle">동적 라이브러리를 바꾸지 않고 실행파일만 업데이트 가능</li></ul><ul id="f93683e4-8529-4029-ad7b-dc833b4d744a" class="bulleted-list"><li style="list-style-type:circle">필요에 따라 동적 라이브러리를 선택적으로 로딩 가능<ul id="0efc5531-8508-4e47-b136-19193641b6bd" class="bulleted-list"><li style="list-style-type:square">예 : CPU 세대 별로 동적 라이브러리 파일을 만들어 둠</li></ul></li></ul><ul id="e0613f06-14f0-4aa5-8ba8-0270acbcbc5e" class="bulleted-list"><li style="list-style-type:circle">여러 실행파일들이 같은 동적 라이브러리를 공유 가능</li></ul></li></ul><ul id="2e9e8e07-b353-47e4-a087-9de6bc0168cd" class="bulleted-list"><li style="list-style-type:disc">단점<ul id="17923430-4168-44ae-9efc-f0a9e471eeaf" class="bulleted-list"><li style="list-style-type:circle">해킹 당하기 쉬움 (예 : DLL 인젝션)<ul id="61b3bd5a-8c8b-4e25-86e5-ccc9f56cc02d" class="bulleted-list"><li style="list-style-type:square">라이브러리 안에 있는 함수의 메모리 주소가 동적으로 링킹되기 때문</li></ul></li></ul><ul id="bc468944-ff4b-4459-b178-6237771d03ef" class="bulleted-list"><li style="list-style-type:circle">DLL 지옥</li></ul></li></ul><h3 id="80d5d06f-27e1-4374-91ad-54382ea6388b" class="">정적 라이브러리의 장단점</h3><ul id="7b812c89-7291-4976-a130-0e2f9979fd28" class="bulleted-list"><li style="list-style-type:disc">장점<ul id="53f678d8-835e-4708-bd29-b19410ec7945" class="bulleted-list"><li style="list-style-type:circle">함수의 주소가 공개 안되니 보다 안전</li></ul><ul id="f7b5d277-138a-4672-9554-aa0d9de4c725" class="bulleted-list"><li style="list-style-type:circle">정확한 버전의 라이브러리가 실행파일 안에 내포되어 있음</li></ul><ul id="4879e698-e0f2-4898-8350-b8cfcee04b1d" class="bulleted-list"><li style="list-style-type:circle">최적화에 유리</li></ul></li></ul><ul id="10e3e2be-d0c0-4759-b30a-637dc0b3b357" class="bulleted-list"><li style="list-style-type:disc">단점<ul id="10f0eb35-c43b-409a-ae8f-ee1dc8bee48e" class="bulleted-list"><li style="list-style-type:circle">CPU 세대 별로 실행파일을 만들어서 배포해야함</li></ul><ul id="3a40bfc9-49d5-4081-bda3-824ee60af0ee" class="bulleted-list"><li style="list-style-type:circle">라이브러리의 소스코드가 바뀔 때마다 실행파일을 재배포해야함<ul id="e4b360a9-e693-44e1-a759-4fcdf545ca37" class="bulleted-list"><li style="list-style-type:square">실행파일의 소스코드가 바뀔 때도 마찬가지</li></ul></li></ul><ul id="75f8dc3d-1281-483e-bdcd-143b10a64d3a" class="bulleted-list"><li style="list-style-type:circle">실행파일의 크기가 커짐</li></ul><ul id="a6093c1c-abdd-41f9-a0d9-abaac6a56b4c" class="bulleted-list"><li style="list-style-type:circle">실행 중 다른 실행파일들과 라이브러리 공유 불가</li></ul></li></ul><h3 id="6ba9541e-d9b9-4556-b46b-e391d86cae1c" class="">베스트 프랙티스 : 정적 라이브러리를 쓰자</h3><ul id="4035e36e-53ef-4137-94b6-0e4fde3b0d5f" class="bulleted-list"><li style="list-style-type:disc">일단 기본적으로 정적 라이브러리를 상요할 것</li></ul><ul id="6698b173-aa1a-430e-ba56-1c2cc8c9c3c2" class="bulleted-list"><li style="list-style-type:disc">동적 라이브러리가 필요하면 그 때 동적 라이브러리로 전환</li></ul></div></article></body></html>

{% endblock post_content %}